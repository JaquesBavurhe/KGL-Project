<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karibu Groceries - Director Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/dashboardShared.css">
</head>

<body>
    <div class="app-shell">
        <aside class="sidebar">
            <div class="sidebar-logo-container">
                <div>
                    <a href="/"><img src="../assets/logo/logo-icon.png" width="auto" height="40px" alt="kgl-logo"></a>
                </div>
                <span class="logo-text">KaribuGroceries</span>
            </div>

            <nav class="nav-list custom-scrollbar">
                <button class="nav-item active" data-target="overview">
                    <span class="material-symbols-outlined">grid_view</span>
                    <span class="nav-label">Dashboard Overview</span>
                </button>
                <button class="nav-item" data-target="sales">
                    <span class="material-symbols-outlined">payments</span>
                    <span class="nav-label">Sales Summary</span>
                </button>
                <button class="nav-item" data-target="procurement">
                    <span class="material-symbols-outlined">shopping_cart</span>
                    <span class="nav-label">Procurement Summary</span>
                </button>
                <button class="nav-item" data-target="credit">
                    <span class="material-symbols-outlined">credit_card</span>
                    <span class="nav-label">Credit Sales Summary</span>
                </button>
                <button class="nav-item" data-target="stock">
                    <span class="material-symbols-outlined">inventory_2</span>
                    <span class="nav-label">Stock Summary</span>
                </button>
            </nav>

            <div style="padding: 12px; border-top: 1px solid rgba(255,255,255,0.05); margin-top: auto;">
                <button id="logoutButton" class="nav-item" style="color: #f43f5e;">
                    <span class="material-symbols-outlined">logout</span>
                    <span class="nav-label">Logout</span>
                </button>
            </div>
        </aside>

        <div class="main-content-area">
            <header class="header">
                <div class="search-bar">
                    <span class="material-symbols-outlined search-icon">search</span>
                    <input id="searchInput" type="text" placeholder="Search by branch, produce or buyer...">
                </div>

                <div class="header-actions">
                    <button style="border: none; background: none; color: #64748b; position: relative; cursor: pointer;">
                        <span class="material-symbols-outlined">notifications</span>
                        <span
                            style="position: absolute; top: 2px; right: 2px; width: 6px; height: 6px; background: #f43f5e; border-radius: 50%; border: 1px solid white;"></span>
                    </button>
                    <div class="profile-section">
                        <div style="text-align: right;">
                            <p id="profileName" style="font-size: 12px; font-weight: 800; margin: 0;">Loading...</p>
                            <p id="profileRole"
                                style="font-size: 9px; font-weight: 600; color: #94a3b8; text-transform: uppercase; margin-top: 2px;">
                                Director</p>
                        </div>
                        <div class="profile-img">
                            <span class="material-symbols-outlined">person</span>
                        </div>
                    </div>
                </div>
            </header>

            <main class="scrollable-view custom-scrollbar">
                <section id="overview" class="view-section active">
                    <div class="hero">
                        <div class="hero-content">
                            <h2 id="overviewGreeting">Welcome, Director</h2>
                            <p id="overviewSubtext">Loading system-wide sales insights...</p>
                        </div>
                        <svg class="hero-svg" viewBox="0 0 400 400">
                            <path
                                d="M0,256L48,229.3C96,203,192,149,288,154.7C384,160,480,224,576,218.7C672,213,768,139,864,122.7C960,107,1056,149,1152,154.7C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
                            </path>
                        </svg>
                    </div>

                    <div class="kpi-grid">
                        <div class="card">
                            <div class="kpi-card-header">
                                <div class="icon-box bg-emerald-light"><span
                                        class="material-symbols-outlined text-emerald">monitoring</span></div>
                            </div>
                            <span class="card-title">Total Cash Revenue</span>
                            <div class="card-value"><span id="kpiTotalRevenue">0</span> <span class="card-unit">UGX</span></div>
                        </div>
                        <div class="card">
                            <div class="kpi-card-header">
                                <div class="icon-box bg-rose-light"><span
                                        class="material-symbols-outlined text-rose">credit_card</span></div>
                            </div>
                            <span class="card-title">Credit Outstanding</span>
                            <div class="card-value"><span id="kpiCreditOutstanding">0</span> <span class="card-unit">UGX</span></div>
                        </div>
                        <div class="card">
                            <div class="kpi-card-header">
                                <div class="icon-box bg-blue-light"><span
                                        class="material-symbols-outlined text-blue">receipt_long</span></div>
                            </div>
                            <span class="card-title">Total Sales Records</span>
                            <div class="card-value"><span id="kpiSalesRecords">0</span></div>
                        </div>
                        <div class="card">
                            <div class="kpi-card-header">
                                <div class="icon-box bg-amber-light"><span
                                        class="material-symbols-outlined text-amber">inventory_2</span></div>
                            </div>
                            <span class="card-title">Total Tonnage Sold</span>
                            <div class="card-value"><span id="kpiTonnageSold">0</span> <span class="card-unit">KG</span></div>
                        </div>
                    </div>
                </section>

                <section id="sales" class="view-section">
                    <h3 class="section-title">Sales Summary</h3>
                    <div class="kpi-grid">
                        <div class="card">
                            <span class="card-title">Total Sales Value per Branch (Cash + Credit)</span>
                            <div id="salesByBranchContainer" style="margin-top: 12px;"></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Top Sales per Produce</span>
                            <div id="topProduceContainer" style="margin-top: 12px; font-size: 13px;"></div>
                        </div>
                    </div>
                    <div class="card">
                        <span class="card-title">Recent Sales Log</span>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>ID</th>
                                        <th>Branch</th>
                                        <th>Produce</th>
                                        <th>Value (UGX)</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="recentSalesBody"></tbody>
                            </table>
                        </div>
                        <p id="salesStatus" class="status"></p>
                    </div>
                </section>

                <section id="procurement" class="view-section">
                    <h3 class="section-title">Procurement Summary</h3>
                    <div class="kpi-grid">
                        <div class="card">
                            <span class="card-title">Total Procurement Cost</span>
                            <div class="card-value"><span id="procurementTotalCost">0</span> <span class="card-unit">UGX</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Total Procured Tonnage</span>
                            <div class="card-value"><span id="procurementTotalTonnage">0</span> <span class="card-unit">KG</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Procurement Records</span>
                            <div class="card-value"><span id="procurementTotalRecords">0</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Active Dealers</span>
                            <div class="card-value"><span id="procurementActiveDealers">0</span></div>
                        </div>
                    </div>
                    <div class="kpi-grid">
                        <div class="card">
                            <span class="card-title">Procurement Cost per Branch</span>
                            <div id="procurementByBranchContainer" style="margin-top: 12px;"></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Top Procured Produce (By Cost)</span>
                            <div id="procurementTopProduceContainer" style="margin-top: 12px; font-size: 13px;"></div>
                        </div>
                    </div>
                    <div class="card">
                        <span class="card-title">Recent Procurement Log</span>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Branch</th>
                                        <th>Produce</th>
                                        <th>Tonnage (KG)</th>
                                        <th>Cost (UGX)</th>
                                        <th>Dealer</th>
                                    </tr>
                                </thead>
                                <tbody id="procurementTableBody"></tbody>
                            </table>
                        </div>
                        <p id="procurementStatus" class="status"></p>
                    </div>
                </section>

                <section id="credit" class="view-section">
                    <h3 class="section-title">Credit Management</h3>
                    <div class="kpi-grid">
                        <div class="card">
                            <span class="card-title">Total Credit Issued</span>
                            <div class="card-value"><span id="creditIssued">0</span> <span class="card-unit">UGX</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Total Unpaid Balance</span>
                            <div class="card-value text-rose"><span id="creditUnpaid">0</span> <span class="card-unit">UGX</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Overdue Payments</span>
                            <div class="card-value text-rose"><span id="creditOverdue">0</span> <span class="card-unit">UGX</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Credit per Branch</span>
                            <div id="creditByBranchContainer" style="font-size: 12px; margin-top: 8px;"></div>
                        </div>
                    </div>
                    <div class="card">
                        <span class="card-title">Outstanding Debtors</span>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Customer/Entity</th>
                                        <th>Branch</th>
                                        <th>Amount (UGX)</th>
                                        <th>Days Overdue</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="debtorsBody"></tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="stock" class="view-section">
                    <h3 class="section-title">Inventory & Stock</h3>
                    <div class="kpi-grid">
                        <div class="card">
                            <span class="card-title">Total Stock Quantity</span>
                            <div class="card-value"><span id="stockTotalQuantity">0</span> <span class="card-unit">KG</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Estimated Stock Value</span>
                            <div class="card-value"><span id="stockTotalValue">0</span> <span class="card-unit">UGX</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Tracked Stock Items</span>
                            <div class="card-value"><span id="stockTotalItems">0</span></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Low Stock Alerts</span>
                            <div class="card-value text-rose"><span id="stockLowCount">0</span></div>
                        </div>
                    </div>
                    <div class="kpi-grid">
                        <div class="card">
                            <span class="card-title">Stock per Branch</span>
                            <div id="stockByBranchContainer" style="margin-top: 12px;"></div>
                        </div>
                        <div class="card">
                            <span class="card-title">Top Inventory by Produce</span>
                            <div id="stockByProduceContainer" style="margin-top: 12px; font-size: 13px;"></div>
                        </div>
                    </div>
                    <div class="card">
                        <span class="card-title">Low Stock Items</span>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Produce</th>
                                        <th>Type</th>
                                        <th>Branch</th>
                                        <th>Quantity (KG)</th>
                                        <th>Selling Price (UGX)</th>
                                    </tr>
                                </thead>
                                <tbody id="lowStockBody"></tbody>
                            </table>
                        </div>
                        <p id="stockStatus" class="status"></p>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script src="../js/directorDashboard.js"></script>
</body>

</html>
